# Concert client tuples are of the platform-system-robot-name-app where
# the name is just a placemarker for the eventual concert client name.
# All other parts of the tuple are fixed.

name: "Turtle Race Concert"
nodes:
  - id: bach
    tuple: linux.ros.turtlebot.turtle_race_concert/race
  - id: chopin
    tuple: linux.ros.turtlebot.turtle_race_concert/race
#  - id: donizetti
#    tuple: linux.ros.turtlebot.turtle_race_concert/race
  - id: announcer
    tuple: linux.ros.pc.turtle_race_concert/race_announcer

topics:
  - id: race_start
    type: std_msgs/Empty
  - id: race_finished_one
    type: std_msgs/Empty
  - id: race_finished_two
    type: std_msgs/Empty
  - id: race_finished_three
    type: std_msgs/Empty
  - id: race_winner_one
    type: std_msgs/Empty
  - id: race_winner_two
    type: std_msgs/Empty
  - id: race_winner_three
    type: std_msgs/Empty
actions: []
edges:
  - start: race_start
    finish: bach
    remap_from: race_start
    remap_to: turtles/race_start
  - start: race_start
    finish: chopin
    remap_from: race_start
    remap_to: turtles/race_start
  - start: race_start
    finish: donizetti
    remap_from: race_start
    remap_to: turtles/race_start
  - start: announcer
    finish: race_start
    remap_from: race_start
    remap_to: turtles/race_start

  - start: bach
    finish: race_finished_one
    remap_from: race_finished
    remap_to: bach/race_finished
  - start: chopin
    finish: race_finished_two
    remap_from: race_finished
    remap_to: chopin/race_finished
  - start: donizetti
    finish: race_finished_three
    remap_from: race_finished
    remap_to: turtles/race_finished

  - start: race_finished_one
    finish: announcer
    remap_from: race_finished_one
    remap_to: bach/race_finished
  - start: race_finished_two
    finish: announcer
    remap_from: race_finished_two
    remap_to: chopin/race_finished
  - start: race_finished_three
    finish: announcer
    remap_from: race_finished_three
    remap_to: donizetti/race_finished
    
  - start: bach
    finish: race_winner_one
    remap_from: race_winner
    remap_to: bach/race_winner
  - start: chopin
    finish: race_winner_two
    remap_from: race_winner
    remap_to: chopin/race_winner
  - start: donizetti
    finish: race_winner_three
    remap_from: race_winner
    remap_to: donizetti/race_winner

  - start: race_winner_one
    finish: announcer
    remap_from: race_winner_one
    remap_to: bach/race_winner
  - start: race_winner_two
    finish: announcer
    remap_from: race_winner_two
    remap_to: chopin/race_winner
  - start: race_winner_three
    finish: announcer
    remap_from: race_winner_three
    remap_to: donizetti/race_winner
    